# FastAPI 서버 Service
# Service: Pod에 접근할 수 있는 고정된 주소(IP)를 제공하는 리소스
# NodePort 타입: 외부에서 노드IP:포트로 접근 가능
apiVersion: v1
kind: Service
metadata:
  name: musinsa-api
  namespace: musinsa
  labels:
    app: musinsa-api
spec:
  type: NodePort                   # 외부에서 접근 가능한 타입
  selector:
    app: musinsa-api               # 이 라벨을 가진 Pod로 트래픽 전달
  ports:
  - port: 8000                     # 서비스 내부 포트
    targetPort: 8000               # 컨테이너 포트
    nodePort: 30080                # 외부 접근 포트 (30000-32767 범위)
    protocol: TCP
