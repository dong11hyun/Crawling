# E-Commerce Crawler Project - í•µì‹¬ ì •ë¦¬

> ì´ì»¤ë¨¸ìŠ¤ íŒë§¤ì ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘ â†’ ê²€ìƒ‰ ì„œë¹„ìŠ¤ êµ¬ì¶• í”„ë¡œì íŠ¸  
> ê°œë°œ ê¸°ê°„: 2025.11 ~ 2026.01

---

## ğŸ¯ í”„ë¡œì íŠ¸ íë¦„

```
ì¿ íŒ¡ í¬ë¡¤ë§ (v0.9~v1.1) â†’ IP ì°¨ë‹¨ â†’ ë¬´ì‹ ì‚¬ (v2.0~v2.1) â†’ ê²€ìƒ‰ ì„œë¹„ìŠ¤ ì™„ì„±
```

---

## ğŸ“Š ë²„ì „ë³„ í•µì‹¬ ìš”ì•½

| ë²„ì „ | í•µì‹¬ ë³€í™” | ì €ì¥ì†Œ | ì„±ëŠ¥ |
|------|----------|--------|------|
| **v0.9** | Sync â†’ ìˆœì°¨ ì²˜ë¦¬ | CSV | 5ê±´/50ì´ˆ |
| **v1.0** | **Async ì „í™˜** + Semaphore(5) | CSV + Lock | 5ê±´/5ì´ˆ â¬†ï¸10ë°° |
| **v1.1** | **SQLite + Batch(10ê±´)** + as_completed | SQLite | ì•ˆì •ì„± â†‘ |
| **v1.2** | **Celery + Redis** ë¶„ì‚° ì²˜ë¦¬ | Django ORM | í™•ì¥ì„± â†‘ |
| **v2.0** | íƒ€ê²Ÿ ë³€ê²½ (ë¬´ì‹ ì‚¬) | CSV | XPath í™œìš© |
| **v2.1** | **OpenSearch + FastAPI + Web UI** | OpenSearch | ê²€ìƒ‰ ì„œë¹„ìŠ¤ |

---

## ğŸ—ï¸ ìµœì‹  ì•„í‚¤í…ì²˜ (v2.1)

```
[ë¬´ì‹ ì‚¬] â†’ [Playwright í¬ë¡¤ëŸ¬] â†’ [OpenSearch] â†’ [FastAPI] â†’ [Web UI]
           v2.1_musinsa.py       Nori ë¶„ì„ê¸°     api_server.py   index.html
```

**ì‹¤í–‰ ìˆœì„œ**:
```bash
docker-compose up -d           # OpenSearch ì‹¤í–‰
python init_opensearch.py      # ì¸ë±ìŠ¤ ì´ˆê¸°í™”
python v2.1_musinsa.py         # ë°ì´í„° ìˆ˜ì§‘
python api_server.py           # API ì„œë²„ (http://127.0.0.1:8000)
# index.html ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°
```

---

## ğŸ”‘ í•µì‹¬ ê¸°ìˆ  í¬ì¸íŠ¸

### 1. ë´‡ íƒì§€ íšŒí”¼ - Chrome CDP
```python
browser = p.chromium.connect_over_cdp("http://localhost:9222")
```
- ì‚¬ìš©ì í¬ë¡¬ì— "ê¸°ìƒ"í•˜ì—¬ ë´‡ íƒì§€ ìš°íšŒ
- ì‹¤í–‰: `chrome.exe --remote-debugging-port=9222 --user-data-dir="C:\temp"`

### 2. ë¹„ë™ê¸° ë™ì‹œì„± ì œì–´ - Semaphore
```python
semaphore = asyncio.Semaphore(5)  # ë™ì‹œ 5ê°œ íƒ­
async with semaphore:
    await process_product(...)
```

### 3. ë™ì  í´ë˜ìŠ¤ëª… ëŒ€ì‘ - XPath
```python
# í´ë˜ìŠ¤ëª…ì´ ë°”ë€Œì–´ë„ ë¼ë²¨ í…ìŠ¤íŠ¸ë¡œ ì°¾ê¸°
page.locator("//dt[contains(., 'ìƒí˜¸')]/following-sibling::dd[1]")
```

### 4. OpenSearch Bulk Insert
```python
from opensearchpy import helpers
helpers.bulk(client, docs)  # ì—¬ëŸ¬ ë¬¸ì„œ í•œë²ˆì— ì‚½ì…
```

### 5. í•œêµ­ì–´ ê²€ìƒ‰ - Nori ë¶„ì„ê¸°
```python
# init_opensearch.py
"tokenizer": { "type": "nori_tokenizer", "decompound_mode": "mixed" }
# "ì—¬ì„±íŒ¨ë”©" â†’ "ì—¬ì„±", "íŒ¨ë”©" ë¶„ë¦¬
```

---

## ğŸ“ ì£¼ìš” íŒŒì¼ êµ¬ì¡°

```
â”œâ”€â”€ v0.9_sync_bot.py      # ë™ê¸°ì‹ (ì¿ íŒ¡)
â”œâ”€â”€ v1.0_async_bot.py     # ë¹„ë™ê¸° + gather (ì¿ íŒ¡)
â”œâ”€â”€ v1.1_async_bot.py     # SQLite + Batch (ì¿ íŒ¡)
â”œâ”€â”€ v2.0_musinsa.py       # ë¬´ì‹ ì‚¬ + CSV
â”œâ”€â”€ v2.1_musinsa.py       # ë¬´ì‹ ì‚¬ + OpenSearch â­
â”‚
â”œâ”€â”€ api_server.py         # FastAPI ê²€ìƒ‰ API
â”œâ”€â”€ init_opensearch.py    # ì¸ë±ìŠ¤ ì´ˆê¸°í™”
â”œâ”€â”€ index.html            # ì›¹ í”„ë¡ íŠ¸ì—”ë“œ
â”œâ”€â”€ docker-compose.yml    # OpenSearch ì»¨í…Œì´ë„ˆ
â”‚
â”œâ”€â”€ config/               # Django + Celery (v1.2)
â”‚   â”œâ”€â”€ celery.py
â”‚   â””â”€â”€ settings.py
â””â”€â”€ crawler/              # Django ì•± (v1.2)
    â”œâ”€â”€ tasks.py
    â””â”€â”€ models.py
```

---

## ğŸ’¡ í•µì‹¬ êµí›ˆ

| ë¬¸ì œ | í•´ê²°ì±… |
|------|--------|
| ë´‡ íƒì§€ | Chrome CDP ê¸°ìƒ ë°©ì‹ |
| ëŠë¦° ì†ë„ | Async + Semaphore |
| íŒŒì¼ ì¶©ëŒ | SQLite â†’ DB ì „í™˜ |
| ê²€ìƒ‰ í•œê³„ | OpenSearch + Nori |
| IP ì°¨ë‹¨ | íƒ€ê²Ÿ ë³€ê²½ (ìœ ì—°í•œ ëŒ€ì‘) |

---

## ğŸ”— API ì‚¬ìš© ì˜ˆì‹œ

```
GET /search?keyword=íŒ¨ë”©&min_price=50000&max_price=100000
```

**ì‘ë‹µ**:
```json
[
  {
    "title": "ì—¬ì„± ë¡± íŒ¨ë”©",
    "brand": "BRAND_NAME",
    "price": 89900,
    "url": "https://...",
    "seller_info": { "company": "...", "contact": "..." }
  }
]
```
